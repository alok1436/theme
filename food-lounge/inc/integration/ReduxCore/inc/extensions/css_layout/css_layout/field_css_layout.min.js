(function(a){redux.field_objects=redux.field_objects||{};redux.field_objects.css_layout=redux.field_objects.css_layout||{};redux.field_objects.css_layout.mainID="";redux.field_objects.css_layout.init=function(b){if(!b){b=a(document).find(".redux-group-tab:visible").find(".redux-container-css_layout:visible")}a(b).each(function(){var d=a(this);var c=d;if(!d.hasClass("redux-field-container")){c=d.parents(".redux-field-container:first")}if(c.is(":hidden")){return}if(c.hasClass("redux-field-init")){c.removeClass("redux-field-init")}else{return}redux.field_objects.css_layout.modInit(d)})};redux.field_objects.css_layout.modInit=function(g){redux.field_objects.css_layout.mainID=g.attr("data-id");var h=Boolean(g.find(".redux-css-layout-container").data("dev-mode"));if(h==true){var b=g.find(".redux-css-layout-container").data("version");var d=a("div.redux-timer").html();if(d!==undefined){var i=d.indexOf("CSS Layout");if(i===-1){a("div.redux-timer").html(d+"<br/>CSS Layout extension v."+b)}}}var c={triggerChange:true,allowClear:false};var e=g.find(".redux-container-css_layout").find(".select2_params");if(e.size()>0){var f=e.val();f=JSON.parse(f);c=a.extend({},c,f)}g.find(".redux-style-css-layout-border").select2(c);g.find("#"+redux.field_objects.css_layout.mainID+" .redux-color-css-layout-border").wpColorPicker({change:function(k,l){redux_change(a(this));var j=l.color.toString();g.find("#"+redux.field_objects.css_layout.mainID).find(".redux-css-layout-border").css({"border-color":j})}});g.find(".redux-style-css-layout-border").on("change",function(k){redux_change(g.find(".redux-css-layout-container"));var j=a(this).val();g.find("#"+redux.field_objects.css_layout.mainID).find(".redux-css-layout-border").css({"border-style":j})});g.find(".css-layout-input").on("change",function(n){var m=a(this).val();var k=redux.field_objects.css_layout.getUnit(m,g);var l=(k!=="")?k:redux.field_objects.css_layout.defUnitVal(a(this),g);m=m.replace(/[^\d.-]/g,"");if(m!==""&&a.isNumeric(m)){redux_change(g.find(".redux-css-layout-container"));a(this).val("");a(this).val(m+l)}else{a(this).val("")}redux.field_objects.css_layout.updateShorthand(a(this),g);if(a(this).hasClass("redux-css-layout-input-radius")){var j=a(this).val();g.find("#"+redux.field_objects.css_layout.mainID).find(".redux-css-layout-border").css({"border-radius":j})}})};redux.field_objects.css_layout.updateShorthand=function(b,d){var c=["margin","border","padding"];var f=["top","right","bottom","left"];var e=[];a.each(c,function(g,i){if(b.hasClass("redux-css-"+i)){a.each(f,function(j,k){e[j]=d.find("#"+redux.field_objects.css_layout.mainID).find(".redux-css-"+i+"-"+k).val();e[j]=(e[j]==="")?"0":e[j]});var h=e[0]+" "+e[1]+" "+e[2]+" "+e[3];d.find("#"+redux.field_objects.css_layout.mainID).find(".redux-css-"+i+"-shorthand").val(h)}})};redux.field_objects.css_layout.getUnit=function(f,e){var b="";var d=f.toLowerCase();var c=a("#"+redux.field_objects.css_layout.mainID).data("units");c=decodeURIComponent(c);c=a.parseJSON(c);a.each(c,function(h,i){var g=d.indexOf(i);if(g!==-1){b=i;return false}});return b};redux.field_objects.css_layout.defUnitVal=function(b,d){var e=redux.field_objects.css_layout.mainID;var c;if(d.find(b).hasClass("redux-css-margin")){c=d.find("#"+e).data("margin-unit")}if(d.find(b).hasClass("redux-css-border")){c=d.find("#"+e).data("border-unit")}if(d.find(b).hasClass("redux-css-padding")){c=d.find("#"+e).data("padding-unit")}if(d.find(b).hasClass("redux-css-layout-input-radius")){c=d.find("#"+e).data("radius-unit")}return c}})(jQuery);